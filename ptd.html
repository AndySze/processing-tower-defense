<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html> <head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<title>Processed Tower Defense</title>
<link href="style.css" media="screen" rel="Stylesheet" type="text/css" />        

</head>

<body>
<h1> Processed Tower Defense </h1>

<div id="game_over"></div>

<div id="game">
<div id="top_controls">
  <span> Lives: <span id="lives">20</span></span>
  <span> Score: <span id="score">0</span></span>
  <span> Gold: <span id="gold">0</span></span>
  <span> Wave: <span id="wave">1</span></span>
  <span> Creep Variety: <span id="creep_variety"></span></span>
  <span> Next Wave in <div style='display:inline;' id="till_next_wave"></div> seconds</span>
</div>

<div id="middle">
<canvas id="tower_defense" width="600" height="400"></canvas>

<div id="side">
<div id="controls">
  <table>
    <tr>
      <td> <button onclick="build_laser_tower();" accesskey="L">Build <u>L</u>aser Tower</button> </td>
      <td> 50 Gold </td>
    </tr>
    <tr>
      <td> <button onclick="build_gattling_tower();"> Build <u>G</u>attling Tower</button></td>
      <td> 50 Gold </td>
    </tr>
    
    <tr>
      <td> <button onclick="build_missile_tower();" accesskey="M">Build <u>M</u>issile Tower</button> </td>
      <td> 100 Gold </td>
    </tr>
    <tr>
      <td> <button onclick="build_cannon_tower();" accesskey="M">Build <u>C</u>annon Tower</button> </td>
      <td> 100 Gold </td>
    </tr>
    <tr>  
      <td> <button onclick="aim_missile();" accesskey="S">Launch <u>S</u>mall Missile</button></td>
      <td> 50 Gold </td>
    </tr>
    <tr><td> Reduce creeps by 50% of current health. </td></tr>
    <tr>
      <td> <button onclick="nuke_creeps();" accesskey="N"> Launch <u>N</u>uke </button></td>
      <td id="nukes_left"> 3 left </td>
    </tr>
    <tr><td> Kill everything, but no loot. </td></tr>
    <tr><td><div class='error'></div></td></tr>
    <tr><td><div class='message'></div></td></tr>
  </table>
</div>

<div id="tower">
  <table>
    <tr><td></td><td> <em>Tower Details</em> </td></tr>
    <tr><td> Type: </td><td id="tower_type"></td></tr>
    <tr><td> Range: </td><td id="tower_range"></tr>
    <tr><td> Damage: </td><td id="tower_damage"></tr>
    <tr><td> Firing Rate: </td><td id="tower_rate"></tr>
    <tr><td><button id="tower_sell_button"></button></td></tr>
    <tr><td><button id="tower_upgrade_button"><u>U</u>pgrade!</button></td></tr>
  </table>  
</div>
<div id="creep">
  <table>
    <tr><td></td><td> <em> Creep Details </em></td></tr>
    <tr><td> Type: </td><td id="creep_type"></td></tr>
    <tr><td> Hp: </td><td id="creep_hp"></td></tr>
    <tr><td> Value: </td><td id="creep_value"></td></tr>
  </table>
</div>
</div>
</div>

<div id="bottom_controls">
  <button id='pause_button' onclick="pause();">Pause</button>
  <button onclick="reset_game();">Reset Game</button>
  <button onclick="spawn_wave();">Spawn Next <u>W</u>ave</button>
  <button id='mute_button' onclick="mute();">Mute</button>
  </div>
</div>

<h4>Hotkeys:</h4>
<ul>
    <li>L – Build laser tower</li>
    <li>M – Build missile tower</li>
    <li>G – Build gattling tower</li>
    <li>S – Fire Small Missile</li>
    <li>N – Launch Nuke</li>
    <li>W – Spawn Next Wave</li>
    <li>U – Upgrade Selected Tower</li>
    <li>[space] – Pause/Resume</li>
    <li>[esc] – Cancel Tower/Missile</li>
</ul>

<h4>Source:</h4>
<ul>
  <li> <a href="http://github.com/rictic/processing-tower-defense/">Repository</a> </li>
  <li> <a href="http://rictic.lighthouseapp.com/projects/11911/home">Wiki and Issue Tracker</a> </li>
  <li> <a href="ptd.js">ptd.js</a> </li>
  <li> <a href="jsfprocessing.js">jsfprocessing.js</a> </li>
  <li> <a href="http://ejohn.org/blog/processingjs/">Processing.js</a> </li>
</ul>


<div id="js_imports">
<script src="processing.js" type="text/javascript" charset="utf-8" ></script>
<script src="jsfprocessing.js" type="text/javascript" charset="utf-8" ></script>
<script src="jquery-1.2.6.min.js" type="text/javascript" charset="utf-8" ></script>
<script src="jquery.hotkeys.js" type="text/javascript" charset="utf-8" ></script>
<script src="game/creep_waves.js" type="text/javascript" charset="utf-8"></script>
<script src="game/terrain.js" type="text/javascript" charset="utf-8"></script>
<script src="game/util.js" type="text/javascript" charset="utf-8"></script>
<script src="game/creeps.js" type="text/javascript" charset="utf-8"></script>
<script src="game/ui_modes.js" type="text/javascript" charset="utf-8"></script>
<script src="game/weapons.js" type="text/javascript" charset="utf-8"></script>
<script src="soundmanager2/soundmanager2.js" type="text/javascript" charset="utf-8"></script>
<script src="game/sound_effects.js" type="text/javascript" charset="utf-8"></script>
<script src="game/ptd.js" type="text/javascript" charset="utf-8" ></script>
</div>

<script type="text/javascript" charset="utf-8">
    $(document).ready(function() {
        start_tower_defense();
    })  
    
    $.hotkeys.add("L", build_laser_tower);
    $.hotkeys.add("M", build_missile_tower);
    $.hotkeys.add("G", build_gattling_tower);
    $.hotkeys.add("C", build_cannon_tower);
    $.hotkeys.add("S", aim_missile);
    $.hotkeys.add("N", nuke_creeps);
    $.hotkeys.add("Space", pause);
    $.hotkeys.add("Esc", unselect);
    $.hotkeys.add("W", spawn_wave);
    $.hotkeys.add("U", function(){ $('#tower_upgrade_button').click() });
    
    var paused = false;
    function pause() {
        paused = !paused;
        pause_resume();
        $('#pause_button').html(paused ? "Resume" : "Pause");
    }
    function mute() {
        mute_unmute();
        $('#mute_button').html(muted ? "Unmute" : "Mute");
    }
    
    //Temporary messages are a bit of a pain
    var timeToHide = null;
    ["error","message"].forEach(function(s){
        $('.'+s).hide();
        $('').bind(s,function(e,message){
            timeToHide = new Date().getTime() + 2500;
            var el = $('.'+s);
            el.html(message).fadeIn();
            window.setTimeout(function() {
                if (new Date().getTime() >= timeToHide)
                    el.fadeOut();
            }, 3000);
        });
    });
    $('#game_over').hide();
    $('').bind('game_over', function(e,hide){
        if (hide == true)
            $('#game_over').html("Game Over! Final score: " + $("#score").html()).fadeIn();
        else
            $('#game_over').html("Just once more...").fadeOut();
    });
    
    
</script>
<hr>
<p><a rel="license" href="http://www.opensource.org/licenses/mit-license.php">MIT License</a>, by <a href="http://lethain.com">Will Larson</a> and <a href="http://blog.rictic.com/">Peter Burns</a></p>
<p>Sound effects are released under a <a href='http://creativecommons.org/licenses/sampling+/1.0/'>Creative Commons Sampling Plus 1.0 License</a> - For authorship information, see <a href='assets/LICENSE'>here</a></p>
<div id="log"></div>
<div id="sfx_dump"/></div>
</body> </html>
